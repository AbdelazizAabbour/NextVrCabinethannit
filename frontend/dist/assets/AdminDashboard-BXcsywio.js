import{u as K,r,j as e}from"./index-DAWVmiiJ.js";import{g as Q,b as J,d as X,e as Y,f as Z,h as ee,u as se,i as te,j as ne,k as re,l as ae,r as ie}from"./api--cjS8XQN.js";const de=()=>{const v=K(),[i,c]=r.useState("appointments"),[h,B]=r.useState({total_rdv:0,pending_rdv:0,today_rdv:0,unread_messages:0}),[W,f]=r.useState([]),[D,H]=r.useState([]),[E,k]=r.useState([]),[z,I]=r.useState([]),[x,y]=r.useState("all"),[a,w]=r.useState(!0),[j,C]=r.useState(null),[N,g]=r.useState(""),[V,p]=r.useState(!1),[L,R]=r.useState([]),[b,m]=r.useState(!1),[u,d]=r.useState(null);r.useEffect(()=>{if(!localStorage.getItem("admin_token")){v("/admin/login");return}S();const t=setInterval(()=>S(!0),45e3);return()=>clearInterval(t)},[v]);const S=async(s=!1)=>{s||w(!0);try{const[t,n,l,o,G]=await Promise.all([Q(),J(),X(),Y(),Z()]);B(t.data),f(n.data),H(l.data),k(o.data),I(G.data)}catch(t){console.error("Error fetching dashboard data:",t)}finally{s||w(!1)}},M=async(s,t)=>{try{await se(s,t),f(n=>n.map(l=>l.id===s?{...l,status:t}:l))}catch(n){console.error("Error updating status:",n)}},U=async s=>{try{await te(s,!0),k(t=>t.map(n=>n.id===s?{...n,is_read:!0}:n))}catch(t){console.error("Error marking as read:",t)}},$=()=>{localStorage.removeItem("admin_token"),v("/admin/login")},T=s=>{C(s),g(s.admin_reply||""),p(!0)},P=async s=>{s.preventDefault();try{await ie(j.id,N),k(t=>t.map(n=>n.id===j.id?{...n,admin_reply:N,replied_at:new Date().toISOString(),is_read:!0}:n)),p(!1),g(""),C(null)}catch(t){console.error("Error replying to message:",t)}},F=W.filter(s=>x==="all"?!0:s.status===x),A=async()=>{try{const s=await ee();R(s.data.reports||[])}catch(s){console.error("Error fetching report history:",s)}},O=async()=>{m(!0),d(null);try{const s=await ne();d({type:"success",text:`Rapport du ${s.data.date} généré avec succès !`}),A()}catch{d({type:"error",text:"Erreur lors de la génération du rapport."})}finally{m(!1)}},_=async(s=null)=>{m(!0);try{const t=await re(s),n=new Blob([t.data],{type:"application/pdf"}),l=window.URL.createObjectURL(n),o=document.createElement("a");o.href=l,o.download=`report-${s||new Date().toISOString().slice(0,10)}.pdf`,document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(l)}catch{d({type:"error",text:"Erreur lors du téléchargement du rapport."})}finally{m(!1)}},q=async s=>{if(window.confirm(`Supprimer le rapport du ${s} ?`))try{await ae(s),R(t=>t.filter(n=>n.date!==s)),d({type:"success",text:"Rapport supprimé."})}catch{d({type:"error",text:"Erreur lors de la suppression."})}};return r.useEffect(()=>{i==="reports"&&A()},[i]),e.jsxs("div",{className:"admin-dashboard",children:[e.jsxs("div",{className:"admin-sidebar",children:[e.jsxs("div",{className:"sidebar-header",children:[e.jsx("h3",{children:"Cabinet Hannit"}),e.jsx("span",{children:"Administration"})]}),e.jsxs("nav",{className:"sidebar-nav",children:[e.jsxs("button",{className:`nav-item ${i==="appointments"?"active":""}`,onClick:()=>c("appointments"),children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),e.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),e.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),"Rendez-vous"]}),e.jsxs("button",{className:`nav-item ${i==="patients"?"active":""}`,onClick:()=>c("patients"),children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),"Patients"]}),e.jsxs("button",{className:`nav-item ${i==="messages"?"active":""}`,onClick:()=>c("messages"),children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),e.jsx("polyline",{points:"22,6 12,13 2,6"})]}),"Messages",h.unread_messages>0&&e.jsx("span",{className:"unread-count",children:h.unread_messages})]}),e.jsxs("button",{className:`nav-item ${i==="users"?"active":""}`,onClick:()=>c("users"),children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"8.5",cy:"7",r:"4"}),e.jsx("polyline",{points:"17 11 19 13 23 9"})]}),"Utilisateurs"]}),e.jsxs("button",{className:`nav-item ${i==="reports"?"active":""}`,onClick:()=>c("reports"),children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),e.jsx("polyline",{points:"10 9 9 9 8 9"})]}),"Rapports PDF"]})]}),e.jsx("div",{className:"sidebar-footer",children:e.jsxs("button",{onClick:$,className:"logout-btn",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("polyline",{points:"16 17 21 12 16 7"}),e.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),"Déconnexion"]})})]}),e.jsxs("main",{className:"admin-content",children:[e.jsxs("header",{className:"content-header",children:[e.jsx("h1",{className:"page-title",children:"Tableau de Bord"}),e.jsxs("div",{className:"user-profile",children:[e.jsx("div",{className:"avatar",children:"A"}),e.jsx("span",{children:"Asmaâ Hannit"})]})]}),e.jsxs("div",{className:"stats-cards",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:`stat-icon primary ${a?"skeleton skeleton-circle":""}`,children:!a&&e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),e.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),e.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),e.jsxs("div",{className:"stat-info",children:[a?e.jsx("div",{className:"skeleton skeleton-text"}):e.jsx("h3",{children:h.total_rdv}),e.jsx("p",{children:"Total Rendez-vous"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:`stat-icon warning ${a?"skeleton skeleton-circle":""}`,children:!a&&e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]})}),e.jsxs("div",{className:"stat-info",children:[a?e.jsx("div",{className:"skeleton skeleton-text"}):e.jsx("h3",{children:h.pending_rdv}),e.jsx("p",{children:"En Attente"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:`stat-icon success ${a?"skeleton skeleton-circle":""}`,children:!a&&e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]})}),e.jsxs("div",{className:"stat-info",children:[a?e.jsx("div",{className:"skeleton skeleton-text"}):e.jsx("h3",{children:h.today_rdv}),e.jsx("p",{children:"Aujourd'hui"})]})]})]}),i==="appointments"&&e.jsxs("div",{className:"dashboard-card main-table animate-fadeInUp",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h2",{children:"Rendez-vous Récents"}),e.jsxs("div",{className:"filter-tabs",children:[e.jsx("button",{className:x==="all"?"active":"",onClick:()=>y("all"),children:"Tous"}),e.jsx("button",{className:x==="pending"?"active":"",onClick:()=>y("pending"),children:"En Attente"}),e.jsx("button",{className:x==="confirmed"?"active":"",onClick:()=>y("confirmed"),children:"Confirmés"})]})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"admin-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Patient"}),e.jsx("th",{children:"Service"}),e.jsx("th",{children:"Date & Heure"}),e.jsx("th",{children:"Téléphone"}),e.jsx("th",{children:"Statut"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:a?[...Array(5)].map((s,t)=>e.jsxs("tr",{className:"skeleton-row",children:[e.jsx("td",{children:e.jsx("span",{className:"skeleton"})}),e.jsx("td",{children:e.jsx("span",{className:"skeleton"})}),e.jsx("td",{children:e.jsx("span",{className:"skeleton"})}),e.jsx("td",{children:e.jsx("span",{className:"skeleton"})}),e.jsx("td",{children:e.jsx("span",{className:"skeleton"})}),e.jsx("td",{children:e.jsx("span",{className:"skeleton"})})]},t)):F.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"font-medium",children:s.name}),e.jsx("td",{children:s.service}),e.jsx("td",{children:e.jsxs("div",{className:"datetime",children:[e.jsx("span",{className:"date",children:s.date}),e.jsx("span",{className:"time",children:s.time})]})}),e.jsx("td",{children:s.phone}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${s.status}`,children:s.status==="pending"?"En Attente":s.status==="confirmed"?"Confirmé":"Annulé"})}),e.jsx("td",{children:e.jsx("div",{className:"actions",children:s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"action-btn check",onClick:()=>M(s.id,"confirmed"),title:"Confirmer",children:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})}),e.jsx("button",{className:"action-btn cross",onClick:()=>M(s.id,"cancelled"),title:"Annuler",children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})})})]},s.id))})]})})]}),i==="patients"&&e.jsxs("div",{className:"dashboard-card animate-fadeInUp",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h2",{children:"Liste des Patients"}),e.jsx("input",{type:"text",placeholder:"Rechercher...",className:"search-input",style:{padding:"6px 12px",borderRadius:"4px",border:"1px solid #ddd"}})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"admin-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nom"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Téléphone"}),e.jsx("th",{children:"Dernière Visite"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:a?[...Array(5)].map((s,t)=>e.jsxs("tr",{className:"skeleton-row",children:[e.jsx("td",{children:e.jsx("span",{className:"skeleton"})}),e.jsx("td",{children:e.jsx("span",{className:"skeleton"})}),e.jsx("td",{children:e.jsx("span",{className:"skeleton"})}),e.jsx("td",{children:e.jsx("span",{className:"skeleton"})}),e.jsx("td",{children:e.jsx("span",{className:"skeleton"})})]},t)):D.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"font-medium",children:s.name}),e.jsx("td",{children:s.email||"N/A"}),e.jsx("td",{children:s.phone}),e.jsx("td",{children:"---"}),e.jsx("td",{children:e.jsx("button",{className:"action-btn view",title:"Voir dossier",children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})})]},s.id))})]})})]}),i==="messages"&&e.jsxs("div",{className:"dashboard-card animate-fadeInUp",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{children:"Messages Reçus"})}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"admin-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"De"}),e.jsx("th",{children:"Sujet"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"État"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:a?[...Array(5)].map((s,t)=>e.jsxs("tr",{className:"skeleton-row",children:[e.jsx("td",{children:e.jsx("span",{className:"skeleton"})}),e.jsx("td",{children:e.jsx("span",{className:"skeleton"})}),e.jsx("td",{children:e.jsx("span",{className:"skeleton"})}),e.jsx("td",{children:e.jsx("span",{className:"skeleton"})}),e.jsx("td",{children:e.jsx("span",{className:"skeleton"})})]},t)):E.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"font-medium",children:s.name}),e.jsx("td",{children:s.subject}),e.jsx("td",{children:new Date(s.created_at).toLocaleDateString()}),e.jsx("td",{children:s.is_read?e.jsx("span",{className:"status-badge confirmed",children:"Lu"}):e.jsx("span",{className:"status-badge pending",children:"Non lu"})}),e.jsx("td",{children:e.jsxs("div",{className:"actions",children:[e.jsx("button",{className:"action-btn view",onClick:()=>T(s),title:"Répondre",children:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})})}),!s.is_read&&e.jsx("button",{className:"action-btn check",onClick:()=>U(s.id),title:"Marquer comme lu",children:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})})]})})]},s.id))})]})})]}),i==="users"&&e.jsxs("div",{className:"dashboard-card animate-fadeInUp",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{children:"Utilisateurs Enregistrés"})}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"admin-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nom"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Rôle"}),e.jsx("th",{children:"Inscrit le"})]})}),e.jsx("tbody",{children:a?[...Array(5)].map((s,t)=>e.jsxs("tr",{className:"skeleton-row",children:[e.jsx("td",{children:e.jsx("span",{className:"skeleton"})}),e.jsx("td",{children:e.jsx("span",{className:"skeleton"})}),e.jsx("td",{children:e.jsx("span",{className:"skeleton"})}),e.jsx("td",{children:e.jsx("span",{className:"skeleton"})})]},t)):z.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"font-medium",children:s.name}),e.jsx("td",{children:s.email}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${s.is_admin?"confirmed":"pending"}`,children:s.is_admin?"Administrateur":"Utilisateur"})}),e.jsx("td",{children:new Date(s.created_at).toLocaleDateString()})]},s.id))})]})})]}),i==="reports"&&e.jsxs("div",{className:"dashboard-card animate-fadeInUp",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h2",{children:"Rapports PDF Quotidiens"}),e.jsxs("div",{className:"report-actions-header",children:[e.jsxs("button",{className:"btn btn-primary report-generate-btn",onClick:O,disabled:b,children:[b?e.jsx("span",{className:"btn-spinner"}):e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),"Générer le rapport du jour"]}),e.jsxs("button",{className:"btn btn-download",onClick:()=>_(),disabled:b,children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),"Télécharger PDF"]})]})]}),u&&e.jsxs("div",{className:`report-alert ${u.type}`,children:[u.type==="success"?e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}):e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),e.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),u.text]}),e.jsxs("div",{className:"report-today-card",children:[e.jsx("div",{className:"report-today-icon",children:e.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),e.jsx("polyline",{points:"10 9 9 9 8 9"})]})}),e.jsxs("div",{className:"report-today-info",children:[e.jsx("h3",{children:"Rapport d'aujourd'hui"}),e.jsx("p",{children:new Date().toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),e.jsx("span",{children:"Inclut tous les rendez-vous, messages et inscriptions du jour"})]})]}),e.jsxs("div",{className:"report-history-section",children:[e.jsxs("h3",{className:"report-history-title",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]}),"Historique des rapports"]}),L.length===0?e.jsxs("div",{className:"report-empty",children:[e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"}),e.jsx("polyline",{points:"13 2 13 9 20 9"})]}),e.jsx("p",{children:"Aucun rapport généré pour le moment"}),e.jsx("span",{children:'Cliquez sur "Générer le rapport du jour" pour commencer'})]}):e.jsx("div",{className:"report-history-list",children:L.map(s=>e.jsxs("div",{className:"report-history-item",children:[e.jsx("div",{className:"report-item-icon",children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"})]})}),e.jsxs("div",{className:"report-item-info",children:[e.jsx("h4",{children:s.date_formatted}),e.jsxs("span",{className:"report-item-meta",children:[s.filename," — ",(s.size/1024).toFixed(1)," Ko"]})]}),e.jsxs("div",{className:"report-item-actions",children:[e.jsx("button",{className:"action-btn report-dl-btn",onClick:()=>_(s.date),title:"Télécharger",children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})}),e.jsx("button",{className:"action-btn cross",onClick:()=>q(s.date),title:"Supprimer",children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})]},s.date))})]})]})]}),V&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content animate-scaleIn",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:["Répondre à ",j?.name]}),e.jsx("button",{className:"close-btn",onClick:()=>p(!1),children:"×"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"message-summary",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Sujet:"})," ",j?.subject]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Message:"})," ",j?.message]})]}),e.jsxs("form",{onSubmit:P,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Votre Réponse"}),e.jsx("textarea",{value:N,onChange:s=>g(s.target.value),placeholder:"Écrivez votre réponse ici...",rows:"5",required:!0})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>p(!1),children:"Annuler"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Envoyer la réponse"})]})]})]})]})})]})};export{de as default};
