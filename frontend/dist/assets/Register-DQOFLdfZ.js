import{u as h,r as o,j as e,L as x}from"./index-DAWVmiiJ.js";import{m as f}from"./api--cjS8XQN.js";const v=()=>{const d=h(),[s,m]=o.useState({name:"",email:"",password:"",password_confirmation:""}),[l,a]=o.useState(""),[c,t]=o.useState(!1),n=i=>{m({...s,[i.target.name]:i.target.value})},p=async i=>{if(i.preventDefault(),t(!0),a(""),s.password!==s.password_confirmation){a("Les mots de passe ne correspondent pas."),t(!1);return}try{await f(s),d("/connexion",{state:{message:"Inscription réussie ! Veuillez vous connecter."}})}catch(r){if(console.error("Registration error:",r),r.response)if(r.response.status===422&&r.response.data?.errors){const u=Object.values(r.response.data.errors)[0][0];a(u)}else r.response.status===500?a("Erreur serveur (500). Veuillez vérifier que votre base de données est bien configurée et accessible."):a(`Une erreur est survenue (${r.response.status}). Veuillez réessayer.`);else r.request?a("Impossible de contacter le serveur. Veuillez vérifier que le backend est bien lancé."):a("Une erreur est survenue lors de l'inscription.")}finally{t(!1)}};return e.jsx("div",{className:"register-page",children:e.jsx("div",{className:"register-container",children:e.jsxs("div",{className:"register-card animate-fadeInUp",children:[e.jsxs("div",{className:"register-header",children:[e.jsx("div",{className:"cabinet-logo",children:e.jsx("img",{src:"/logo.png",alt:"Cabinet Hannit",style:{width:"60px",height:"60px"}})}),e.jsx("h2",{children:"Créer un compte"}),e.jsx("p",{children:"Inscrivez-vous pour un suivi personnalisé"})]}),l&&e.jsxs("div",{className:"alert alert-error",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),l]}),e.jsxs("form",{onSubmit:p,className:"register-form",children:[e.jsxs("div",{className:"form-group animate-fadeInUp animate-delay-100",children:[e.jsx("label",{htmlFor:"name",children:"Nom complet"}),e.jsx("input",{type:"text",id:"name",name:"name",className:"form-input",value:s.name,onChange:n,required:!0,placeholder:"Votre nom"})]}),e.jsxs("div",{className:"form-group animate-fadeInUp animate-delay-100",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",className:"form-input",value:s.email,onChange:n,required:!0,placeholder:"votre@email.com"})]}),e.jsxs("div",{className:"form-group animate-fadeInUp animate-delay-100",children:[e.jsx("label",{htmlFor:"password",children:"Mot de passe"}),e.jsx("input",{type:"password",id:"password",name:"password",className:"form-input",value:s.password,onChange:n,required:!0,placeholder:"••••••••"})]}),e.jsxs("div",{className:"form-group animate-fadeInUp animate-delay-100",children:[e.jsx("label",{htmlFor:"password_confirmation",children:"Confirmer le mot de passe"}),e.jsx("input",{type:"password",id:"password_confirmation",name:"password_confirmation",className:"form-input",value:s.password_confirmation,onChange:n,required:!0,placeholder:"••••••••"})]}),e.jsx("button",{type:"submit",className:"btn btn-primary btn-block animate-fadeInUp animate-delay-100",style:{width:"100%",height:"52px"},disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-small",style:{marginRight:"10px"}}),"Inscription en cours..."]}):"S'inscrire"})]}),e.jsx("div",{className:"register-footer animate-fadeInUp animate-delay-100",children:e.jsxs("p",{children:["Déjà un compte ? ",e.jsx(x,{to:"/connexion",children:"Connectez-vous ici"})]})})]})})})};export{v as default};
